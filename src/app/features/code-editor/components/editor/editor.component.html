<div class="editor-container">
  <div class="editor-header">
    <!-- <div class="header-left">
       <nb-select
         [(ngModel)]="selectedTemplate"
         (selectedChange)="selectTemplate($event)"
         placeholder="Select Template">
         @for (lang of languages ; track languages) {
           <nb-option [value]="lang.value">{{ lang.label }}</nb-option>
         }
       </nb-select>
     </div>-->
    <div class="header-right">
      <button nbButton ghost (click)="toggleParameters()">
        <nb-icon [icon]="showParameters ? 'eye-off-outline' : 'eye-outline'"></nb-icon>
        {{ showParameters ? 'Ocultar Parámetros' : 'Mostrar Parámetros' }}
      </button>
    </div>
  </div>
  <div class="editor-content">
    <div class="editor-pane">
      <ngs-code-editor
        [theme]="theme"
        [codeModel]="model"
        [options]="options"
        (valueChanged)="onCodeChanged($event)">
      </ngs-code-editor>
    </div>

    <div class="parameters-pane" *ngIf="showParameters">
      <div class="parameters-header">
        <h3>Parámetros Disponibles</h3>
      </div>
      <div class="parameters-content">
        <nb-accordion>
          <nb-accordion-item *ngFor="let param of parameters">
            <nb-accordion-item-header>
              {{ param.label }}
            </nb-accordion-item-header>
            <nb-accordion-item-body>
              <div class="parameter-details">
                <p><strong>Tipo:</strong> {{ param.type }}</p>
                <p><strong>Requerido:</strong> {{ param.required ? 'Sí' : 'No' }}</p>
                <p *ngIf="param.placeholder"><strong>Placeholder:</strong> {{ param.placeholder }}</p>
                <button nbButton size="small" (click)="insertParameter(param.name)">
                  Insertar
                </button>
              </div>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>
      </div>
    </div>

    <div class="preview-pane">
      <div class="preview-header">
        <h3>Vista Previa</h3>
      </div>
      <div class="preview-content" [innerHTML]="previewContent">
      </div>
    </div>
  </div>
</div>
